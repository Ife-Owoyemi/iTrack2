

<% years.each do |year| %>
	<% @semesters = year.semesters.all %>
	<% @semesters.each do |semester| %>
		<% @courses = semester.usercourses.all %>
		<% @courses.each do |c| %>
			<% coursearray << c.department + " " + c.num.to_s %>
			<% if !user_courses.has_key?(c.department) %>
		      <% user_courses[c.department] = Hash.new %>
		      <% user_courses[c.department][c.num] = Hash.new %>
		      <% user_courses[c.department][c.num] = c.credits %>
		    <% else %>
		      <% user_courses[c.department][c.num] = Hash.new %>
		      <% user_courses[c.department][c.num] = c.credits %>
		    <% end %>
			<% if c.status == "Taken" %>
				<% if !taken.has_key?(c.department) %>
			      <% taken[c.department] = Hash.new %>
			      <% taken[c.department][c.num] = Hash.new %>
			      <% taken[c.department][c.num] = c.credits %>
			    <% else %>
			      <% taken[c.department][c.num] = Hash.new %>
			      <% taken[c.department][c.num] = c.credits %>
			    <% end %>			
			<% elsif c.status == "Taking" %>
				<% if !taking.has_key?(c.department) %>
			      <% taking[c.department] = Hash.new %>
			      <% taking[c.department][c.num] = Hash.new %>
			      <% taking[c.department][c.num] = c.credits %>
			    <% else %>
			      <% taking[c.department][c.num] = Hash.new %>
			      <% taking[c.department][c.num] = c.credits %>
			    <% end %>
			<% elsif c.status == "Will Take" %>
				<% if !wtake.has_key?(c.department) %>
			      <% wtake[c.department] = Hash.new %>
			      <% wtake[c.department][c.num] = Hash.new %>
			      <% wtake[c.department][c.num] = c.credits %>
			    <% else %>
			      <% wtake[c.department][c.num] = Hash.new %>
			      <% wtake[c.department][c.num] = c.credits %>
			    <% end %>
			<% end %>
		<% end %>
	<% end %>
<% end %>
<%= wtake %>